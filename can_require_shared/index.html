<html>
	<head>
		<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.1.0/pure-min.css">
		<link rel="stylesheet" href="../global.css">
		<script src="../components/jquery/jquery.js"></script>
		<script src="../components/CanJS/can.jquery.js"></script>
		<script src="../components/CanJS/can.view.mustache.js"></script>
		<script src="../components/requirejs/require.js"></script>
	</head>
	<body>
		<h2>Shared objects using CanJS</h2>
		<div id="control_main">
			<div class="pure-g">
				<div class="pure-u-1-3">
					<div id="control_values">
						<form class="pure-form pure-form-stacked">
							<fieldset>
								<legend>Values</legend>
								<div class="placeholder"></div>
							</fieldset>
						</form>
						<script id="control_values_template" type="text/mustache">
							<label for="price">Price</label>
							<input type="text" name="price" value="{{model.price}}"/>
							<label for="taxRate">Tax Rate</label>
							<input type="number" name="taxRate" value="{{model.taxRate}}"/>
						</script>
					</div>
				</div>
				<div class="pure-u-1-3">
					<div id="control_items">
						<form class="pure-form pure-form-stacked">
							<fieldset>
								<legend>Qty</legend>
								<div class="placeholder"></div>
							</fieldset>
						</form>
						<script id="control_items_template" type="text/mustache">
							<label for="price">Qty</label>
							<input type="text" name="qty" value="{{model.qty}}" /> <br />
							Sub Total: {{model.subtotal}} <br />
						</script>
					</div>
				</div>
				<div class="pure-u-1-3">
					<div id="control_totals">
						<form class="pure-form pure-form-stacked">
							<fieldset>
								<legend>Totals</legend>
								<div class="placeholder"></div>
							</fieldset>
						</form>
						<script id="control_totals_template" type="text/mustache">
							Tax Rate: {{model.taxRate}} <br />
							Tax: {{model.tax}} <br />
							Total: {{model.total}} <br />
						</script>
					</div>

					</div>
				</div>
				
				<h2>Notes</h2>
				<ul>
					<li>The parent controler intializes the children</li>
					<li>There is a shared object between them</li>
					<li>May be faster</li>
					<li>Components are not self contained</li>
					<li>But if necessary we could add a wrapper to initialize them, so no big deal</li>
				</ul>

			
			<script>
				//$(function () {
					requirejs(['control_main'], function(Control) {
						var $ele = $("#main");
						return new Control($ele);
					});
				//});
			</script>

		</div>
	</body>
</html>